{% extends 'base.html' %}

{% block title %}{{ car.brand }} {{ car.model }} | Gestión de Activos{% endblock %}

{% block extra_css %}
<style>
    :root {
        --b-blue: #003580;
        --b-blue-light: #006ce4;
        --b-bg-gray: #f5f5f5;
        --b-text: #1a1a1a;
        --b-red: #d4111e;
    }

    body {
        background-color: var(--b-bg-gray);
        color: var(--b-text);
    }

    .fleet-detail-container {
        max-width: 1000px;
        margin: 40px auto;
    }

    .fleet-detail-card {
        background: white;
        border: 1px solid #e7e7e7;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .fleet-image-side {
        background-color: #f8f9fa;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 30px;
        border-right: 1px solid #f0f0f0;
    }

    .fleet-image {
        max-width: 100%;
        height: auto;
        object-fit: contain;
        filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1));
    }

    .fleet-info-side {
        padding: 40px;
    }

    /* Stat Boxes Estilo Dashboard */
    .stat-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-item {
        background-color: #f0f6fd;
        padding: 20px;
        border-radius: 4px;
        border: 1px solid #d0e3ff;
        text-align: center;
    }

    .stat-val {
        font-size: 1.8rem;
        font-weight: 800;
        color: var(--b-blue);
        display: block;
        line-height: 1.2;
    }

    .stat-lbl {
        font-size: 0.75rem;
        text-transform: uppercase;
        font-weight: 700;
        color: #666;
        letter-spacing: 0.5px;
    }

    /* Acciones */
    .btn-fleet-edit {
        background-color: var(--b-blue-light);
        color: white;
        font-weight: 700;
        padding: 12px;
        border-radius: 4px;
        text-decoration: none;
        display: block;
        text-align: center;
        transition: background 0.2s;
        border: none;
        margin-bottom: 15px;
    }
    .btn-fleet-edit:hover { background-color: var(--b-blue); color: white; }

    .btn-fleet-del {
        background: transparent;
        color: var(--b-red);
        border: 1px solid #fde8ea;
        padding: 10px;
        width: 100%;
        border-radius: 4px;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.2s;
    }
    .btn-fleet-del:hover { background-color: #fde8ea; }

    .status-badge-top {
        font-size: 0.7rem;
        background-color: #e6f6e8;
        color: #008009;
        padding: 4px 12px;
        border-radius: 50px;
        font-weight: 800;
        border: 1px solid #bcebc3;
    }

    .breadcrumb-item a {
        color: var(--b-blue-light);
        text-decoration: none;
        font-weight: 600;
    }
</style>
{% endblock %}

{% block content %}
<div class="container fleet-detail-container">
    
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb small">
            <li class="breadcrumb-item"><a href="{{ url_for('car.list_cars') }}">Gestión de Flota</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ car.brand }} {{ car.model }}</li>
        </ol>
    </nav>

    <div class="fleet-detail-card animate__animated animate__fadeIn">
        <div class="row g-0">
            <div class="col-lg-6 fleet-image-side">
                {% if car.image %}
                    <img src="{{ car.image }}" class="fleet-image" alt="{{ car.brand }}">
                {% else %}
                    <img src="https://images.unsplash.com/photo-1541899481282-d53bffe3c35d?q=80&w=800&auto=format&fit=crop" class="fleet-image" alt="Vehículo Genérico">
                {% endif %}
            </div>

            <div class="col-lg-6">
                <div class="fleet-info-side">
                    <div class="mb-4">
                        <span class="status-badge-top">ACTIVO EN INVENTARIO</span>
                        <h1 class="fw-bold text-dark mt-2 mb-0">{{ car.brand }}</h1>
                        <h2 class="h4 text-muted fw-normal">{{ car.model }}</h2>
                    </div>

                    <div class="stat-grid">
                        <div class="stat-item">
                            <span class="stat-val">{{ car.pricePerDay }}€</span>
                            <span class="stat-lbl">Tarifa Diaria</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-val">{{ car.maxPeople }}</span>
                            <span class="stat-lbl">Ocupantes</span>
                        </div>
                    </div>

                    <div class="mb-5">
                        <p class="small text-muted mb-2"><strong>ID del Activo:</strong> #{{ car.idCar }}</p>
                        <p class="small text-muted mb-0"><strong>Última revisión:</strong> Al corriente</p>
                    </div>

                    <div class="admin-actions">
                        <a href="{{ url_for('car.show_edit_form', idCar=car.idCar) }}" class="btn-fleet-edit shadow-sm">
                            <i class="fas fa-pen-nib me-2"></i>Editar Información del Vehículo
                        </a>
                        
                        <form action="{{ url_for('car.delete_car', idCar=car.idCar) }}" method="post" onsubmit="return confirm('¿Seguro que quieres eliminar permanentemente este vehículo de tu flota? Esta acción no se puede deshacer.');">
                            <button type="submit" class="btn-fleet-del">
                                <i class="fas fa-trash-alt me-2"></i>Dar de baja de la flota
                            </button>
                        </form>
                        
                        <div class="text-center mt-4">
                            <a href="{{ url_for('car.list_cars') }}" class="text-decoration-none small text-muted">
                                <i class="fas fa-chevron-left me-1"></i> Volver al listado completo
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
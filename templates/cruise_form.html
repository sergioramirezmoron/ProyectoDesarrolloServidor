{% block content %}
<h1>Crear Crucero</h1>

<form method="post">
    <fieldset>
        <legend>Información General</legend>
        <label for="idShip">Barco:</label>
        <select name="idShip" required>
            {% for ship in ships %}
            <option value="{{ ship.idShip }}">{{ ship.cruiseName }} (Capacidad: {{ ship.capacity }})</option>
            {% endfor %}
        </select><br>

        <label for="startDate">Fecha de inicio:</label>
        <input type="datetime-local" name="startDate" required><br>

        <label for="endDate">Fecha de fin:</label>
        <input type="datetime-local" name="endDate" required><br>

        <label for="description">Descripción:</label>
        <textarea name="description"></textarea>
    </fieldset>

    <hr>

    <h3>Ruta de Paradas</h3>
    <p><small>Complete al menos las primeras dos paradas.</small></p>
    
    {% for i in range(1, 6) %}
    <fieldset style="border: 1px solid #ccc; margin-bottom: 10px; padding: 10px;">
        <legend>Parada {{ i }}</legend>
        
        <label>Ubicación:
            <select name="stop_location_{{ i }}">
                <option value="">-- No incluir esta parada --</option>
                {% for location in locations %}
                <option value="{{ location.idLocation }}">{{ location.city }}, {{ location.country }}</option>
                {% endfor %}
            </select>
        </label><br>

        {# Campo oculto para stop_order_i que requiere tu backend #}
        <input type="hidden" name="stop_order_{{ i }}" value="{{ i }}">

        <label>Llegada: 
            <input name="stop_arrival_{{ i }}" type="datetime-local">
        </label>
        <label>Salida: 
            <input name="stop_departure_{{ i }}" type="datetime-local">
        </label>
    </fieldset>
    {% endfor %}

    <hr>

    <h3>Segmentos de Precio</h3>
    <p><small>Defina los tramos vendibles (Ej: De Parada 1 a Parada 2).</small></p>

    {% for j in range(1, 5) %}
    <fieldset style="border: 1px solid #ddd; margin-bottom: 10px; padding: 10px;">
        <legend>Segmento {{ j }}</legend>
        
        <label>Parada Origen (Orden): 
            <input name="segment_origin_{{ j }}" type="number" min="1" max="5" placeholder="Ej: 1">
        </label>

        <label>Parada Destino (Orden): 
            <input name="segment_dest_{{ j }}" type="number" min="1" max="5" placeholder="Ej: 2">
        </label>

        <label>Precio (€): 
            <input name="segment_price_{{ j }}" type="number" step="0.01" min="0">
        </label>
    </fieldset>
    {% endfor %}

    <div style="margin-top: 20px;">
        <button type="submit" style="background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px;">
            Guardar Crucero Completo
        </button>
    </div>
</form>
{% endblock %}
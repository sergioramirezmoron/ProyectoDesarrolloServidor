{% extends 'base.html' %}

{% block extra_css %}
<style>
    /* --- Hero Section & Search --- */
    .hero-section {
        background: linear-gradient(rgba(0, 53, 128, 0.4), rgba(0, 53, 128, 0.4)), url('https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?ixlib=rb-4.0.3&auto=format&fit=crop&w=2021&q=80');
        background-size: cover;
        background-position: center 60%;
        padding: 80px 0 120px 0;
        position: relative;
        margin-top: 56px; /* Ajuste para navbar fixed */
    }

    .hero-title {
        color: white;
        text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        margin-bottom: 2rem;
    }

    .search-box-container {
        background: #fff;
        border-radius: 8px;
        padding: 4px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        border: 4px solid var(--accent-color); /* Borde amarillo característico */
        position: relative;
        z-index: 10;
    }

    /* Pestañas del buscador */
    .nav-tabs-custom {
        border-bottom: none;
        padding: 10px 20px 0 20px;
    }

    .nav-tabs-custom .nav-link {
        border: none;
        color: white;
        background: rgba(0,0,0,0.3);
        margin-right: 5px;
        border-radius: 8px 8px 0 0;
        padding: 10px 20px;
    }

    .nav-tabs-custom .nav-link.active {
        background-color: white;
        color: var(--secondary-color);
        font-weight: 700;
        border-bottom: 4px solid white; /* Fusión con la caja */
    }
    
    .nav-tabs-custom .nav-link:hover:not(.active) {
        background: rgba(0,0,0,0.5);
        color: white !important;
    }

    .search-content {
        padding: 30px;
    }

    /* --- Cards & Features --- */
    .category-card {
        border: none;
        border-radius: 12px;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        height: 100%;
        cursor: pointer;
    }

    .category-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    .category-img {
        height: 200px;
        object-fit: cover;
    }

    .icon-box {
        width: 60px;
        height: 60px;
        background-color: rgba(13, 110, 253, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
        color: var(--primary-color);
        font-size: 1.5rem;
    }
</style>
{% endblock %}

{% block content %}
    <header class="hero-section d-flex align-items-center">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-11">
                    <h1 class="hero-title display-4 fw-bold">¿A dónde te llevará tu próximo sueño?</h1>
                    
                    <ul class="nav nav-tabs nav-tabs-custom" id="travelTabs" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab-stays"><i class="fas fa-bed me-2"></i>Alojamientos</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-flights"><i class="fas fa-plane me-2"></i>Vuelos</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-transport"><i class="fas fa-bus me-2"></i>Bus/Tren</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-cruises"><i class="fas fa-ship me-2"></i>Cruceros</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-cars"><i class="fas fa-car me-2"></i>Alquiler Coches</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-experiences"><i class="fas fa-utensils me-2"></i>Experiencias</button>
                        </li>
                    </ul>

                    <div class="search-box-container">
                        <div class="search-content tab-content">
                            
                            <div class="tab-pane fade" id="tab-flights">
                                <form class="row g-2">
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="flightFrom" placeholder="Origen">
                                            <label><i class="fas fa-plane-departure text-muted me-2"></i>Origen</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="flightTo" placeholder="Destino">
                                            <label><i class="fas fa-plane-arrival text-muted me-2"></i>Destino</label>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-floating">
                                            <input type="date" class="form-control" id="flightDate">
                                            <label>Ida</label>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-floating">
                                            <input type="date" class="form-control" id="flightReturn">
                                            <label>Vuelta</label>
                                        </div>
                                    </div>
                                    <div class="col-md-2 d-grid">
                                        <button type="submit" class="btn btn-search h-100">Buscar</button>
                                    </div>
                                </form>
                            </div>

                            <div class="tab-pane fade show active" id="tab-stays">
                                <form class="row g-2" action="{{ url_for('aco.search') }}" method="GET">
                                    <div class="col-md-4">
                                        <div class="form-floating">
                                            <input type="text" name="location" class="form-control" placeholder="Destino">
                                            <label><i class="fas fa-search text-muted me-2"></i>¿A dónde vas?</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="date" name="checkin" class="form-control">
                                            <label>Entrada</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="date" name="checkout" class="form-control">
                                            <label>Salida</label>
                                        </div>
                                    </div>
                                    <div class="col-md-2 d-grid">
                                        <button type="submit" class="btn btn-search h-100">Buscar</button>
                                    </div>
                                </form>
                            </div>

                            <div class="tab-pane fade" id="tab-cruises">
                                <div class="row align-items-center">
                                    <div class="col-md-9">
                                        <h5 class="mb-1"><i class="fas fa-anchor text-primary me-2"></i>Diseña tu travesía</h5>
                                        <p class="text-muted mb-0 small">Elige dónde subir y dónde bajar. Precios por tramos disponibles.</p>
                                    </div>
                                    <div class="col-md-3 d-grid">
                                        <a href="{{ url_for('cruise.list_cruises') }}" class="btn btn-info text-white fw-bold py-3">Ver Rutas</a>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="tab-transport">
                                <form class="row g-2">
                                    <div class="col-md-3">
                                        <select class="form-select py-3" style="height: 58px;">
                                            <option value="bus">Autobús</option>
                                            <option value="train">Tren</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" placeholder="Origen">
                                            <label>Origen</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" placeholder="Destino">
                                            <label>Destino</label>
                                        </div>
                                    </div>
                                    <div class="col-md-3 d-grid">
                                        <a href="{{ url_for('transport.list_transports') }}" class="btn btn-search d-flex align-items-center justify-content-center">Buscar Billete</a>
                                    </div>
                                </form>
                            </div>

                            <div class="tab-pane fade" id="tab-cars">
                                <div class="text-center py-2">
                                    <p class="mb-2">Encuentra el coche perfecto para tu roadtrip.</p>
                                    <a href="{{ url_for('carRenting.list_rents') }}" class="btn btn-outline-primary">Ver Disponibilidad</a>
                                </div>
                            </div>
                            
                            <div class="tab-pane fade" id="tab-experiences">
                                <div class="input-group">
                                    <span class="input-group-text bg-white"><i class="fas fa-utensils"></i></span>
                                    <input type="text" class="form-control p-3" placeholder="¿Qué te apetece comer o visitar hoy? (Ej: Sushi, Museo del Prado...)">
                                    <a href="{{ url_for('tour.list_tours') }}" class="btn btn-search px-5 d-flex align-items-center">Explorar</a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section class="py-5">
        <div class="container">
            <h2 class="fw-bold mb-4">Todo lo que necesitas para tu viaje</h2>
            <div class="row g-4">
                <div class="col-md-4 col-sm-6">
                    <div class="card category-card shadow-sm">
                        <img src="https://images.unsplash.com/photo-1436491865332-7a61a109cc05?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="card-img-top category-img" alt="Vuelos">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">Vuelos Internacionales</h5>
                            <p class="card-text text-muted small">Conexiones con todas las aerolíneas principales.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6">
                    <div class="card category-card shadow-sm">
                        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="card-img-top category-img" alt="Hoteles">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">Alojamientos Únicos</h5>
                            <p class="card-text text-muted small">Desde resorts de lujo hasta casas rurales.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6">
                    <div class="card category-card shadow-sm">
                        <img src="https://images.unsplash.com/photo-1548574505-5e239809ee19?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="card-img-top category-img" alt="Cruceros">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">Cruceros Flexibles</h5>
                            <p class="card-text text-muted small">Sube y baja en el puerto que elijas.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12">
                    <div class="card category-card shadow-sm bg-dark text-white" style="background: url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80') center/cover;">
                        <div class="card-body d-flex flex-column justify-content-end p-4" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                            <h4 class="fw-bold">Experiencias Culinarias</h4>
                            <p class="mb-0">Reserva mesa en los mejores restaurantes o apúntate a rutas gastronómicas.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12">
                    <div class="card category-card shadow-sm bg-dark text-white" style="background: url('https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80') center/cover;">
                        <div class="card-body d-flex flex-column justify-content-end p-4" style="background: linear-gradient(transparent, rgba(0,0,0,0.8));">
                            <h4 class="fw-bold">Movilidad Total</h4>
                            <p class="mb-0">Alquiler de coches, traslados privados y billetes de tren/bus integrados.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {% if accommodations %}
    <section class="py-5 bg-white">
        <div class="container">
            <h3 class="fw-bold mb-4">Alojamientos Destacados</h3>
            <div class="row g-4">
                {% for acc in accommodations %}
                <div class="col-md-4">
                    <div class="card h-100 shadow-sm border-0">
                         <!-- Placeholder image if none provided -->
                        <img src="https://placehold.co/600x400?text={{ acc.name }}" class="card-img-top" alt="{{ acc.name }}" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">{{ acc.name }}</h5>
                            <div class="mb-2">
                                {% for i in range(acc.stars_quality) %}
                                    <i class="fas fa-star text-warning small"></i>
                                {% endfor %}
                            </div>
                            <p class="card-text text-muted small"><i class="fas fa-map-marker-alt me-1"></i> {{ acc.address }}</p>
                            <p class="card-text">{{ acc.description[:100] }}...</p>
                        </div>
                        <div class="card-footer bg-white border-top-0 pb-3">
                            <a href="{{ url_for('aco.show', id=acc.id) }}" class="btn btn-outline-primary w-100">Ver Detalles</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

    <section class="bg-light py-5 border-top">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h3 class="fw-bold text-secondary">¿Gestionas un Hotel, Aerolínea o Agencia de Tours?</h3>
                    <p class="text-muted mb-0">Únete a TravelDream Business. Publica tus ofertas y gestiona reservas en tiempo real.</p>
                </div>
                <div class="col-md-4 text-md-end mt-3 mt-md-0">
                    {% if not session.get('userId') %}
                        <a href="{{ url_for('userBp.register') }}" class="btn btn-outline-primary btn-lg rounded-pill px-5">Registrar Empresa</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
{% endblock %}
